<link type="text/css" href="{{MEDIA_URL}}scripts/jquery.ui/css/ui-lightness/jquery-ui-1.7.2.custom.css" rel="stylesheet" />
<script src="{{MEDIA_URL}}scripts/jquery.js" type="text/javascript"></script>    
<script type="text/javascript" src="{{MEDIA_URL}}scripts/jquery.ui/js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="{{MEDIA_URL}}scripts/jquery.ui/js/jquery-ui-1.7.2.custom.min.js"></script>
<style type="text/css">
    #dialog { overflow: hidden; }
</style>
<a href="#" id="browse">Image Browser</a>
<div id="image"></div>
<div id="dialog">
     <iframe id="modalIframeId" width="100%" height="100%"
        marginWidth="0" marginHeight="0" frameBorder="0" scrolling="auto"
        title="Dialog Title">Your browser does not support iframes.</iframe>
</div>
<script type="text/javascript">
$("#dialog").dialog({
    title: "Image Manager",
    autoOpen: false,
    draggable: false,
    modal: true,
    width: 1200,
    height: 600,
    position: ['center', 20],
    resizeable: true
});

$("#browse").click(function(evt) {
    evt.preventDefault();
    launch_browser();
});

function launch_browser(editor) {
    $("#modalIframeId").attr("src","{%url media_browser:image_list%}");
    $("#dialog").dialog('open');
    _EDITOR = editor[0];
}

_EDITOR = null;

function add_image(tag) {
    if (!tag) return false;
    $("#image").html(tag);
    $("#dialog").dialog('close');
    _EDITOR.insertHtml(tag);
}
</script>

